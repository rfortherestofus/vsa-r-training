---
title: "R in 3 Months: Week 3 (Data Wrangling and Analysis)"
output:
  xaringan::moon_reader:
    css: ["style.css", "default"]
    lib_dir: libs
    df_print: paged
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: 16:9
editor_options: 
  chunk_output_type: console
---

```{r, include=FALSE, eval = TRUE}
options(htmltools.preserve.raw = FALSE)
library("tidyverse")
library("wakefield")
library(palmerpenguins)
```


# Agenda

--

1. Housekeeping

--

1. Tips from feedback

--

1. Group Work

--

1. Next Week

---

# Housekeeping

--

- Office hours recap

--

- Questions on project assignments?

--

- Other logistics questions? 


---

class: inverse, center, middle

# Tips from feedback

---

# Tips from feedback

- NA values in R

- read_csv() vs read.csv()

- Typos happen to everyone

---

## How R handles NA

--

SPSS has named NA values

--

In R, a value is only NA if it shows up in light gray


---

## How R handles NA

```{r eval = TRUE}
penguins
```

---

## How R handles NA

```{r eval = TRUE}
penguins %>% 
  mutate(not_actually_na = "NA")
```


---

## How R handles NA

--

> NA in the R language explicitly means missing. If you have an Excel worksheet with empty cells then these will become NA when imported into R. The drop_na() function will drop all rows which contain an NA, but can target specific columns by naming them , eg drop_na(shipment_date).

---

# NA values

We were asked about replacing NA values in datasets.

The `{tidyr}` package provides two really useful functions for doing this

- `replace_na()` will replace existing `NA` values with your chosen values

- `na_if()` will replace values you specify with `NA`

---

## replace_na()

```{r}
msleep %>% 
  select(name, conservation) %>% 
  mutate(conservation = replace_na(conservation, "unknown"))
```

---

## na_if()

```{r}
starwars %>%
  select(name, eye_color) %>%
  mutate(eye_color = na_if(eye_color, "unknown"))
```

---

## read_csv() vs read.csv()

- It understands empty cells as NA automatically

- It's smarter! It will more often detect complex data types

- It's **much** faster.

---

# Typos happen to everone

.pull-left[
<img src='images/david-asking-for-help.png'/>
]

.pull-right[
```{r eval = FALSE}
library(tidyverse)
library(tidycensus)
library(janitor)

get_acs(year = 2019,
        geography = "county",
        geometry = TRUE,
        state =  "OR",
        variables = "B01003_001") %>% 
  clean_names() %>% 
  mutate(
    name = str_remove(name, " County")) %>% 
  rename(poulation = estimate,
         county = name) %>% 
  select(county, population)
```

]

---

# Group Work

- Each person share your code (either share your Gist link or by sharing your screen)

- Presenter gives a short (~1 minute overview)

- Others look for one thing that doesn't make sense

- Presenter responds to questions

---


# Next Week

--

1. Course assignment: complete data viz lessons

--

1. Project assignment: make a graph from your data

